{"version":3,"sources":["webpack:///../../../src/utils/requireScript.ts","webpack:///../../../src/APILoader/index.tsx","webpack:///../../../src/common/hooks.tsx","webpack:///../../../src/Map/useMap.tsx","webpack:///../../../src/Map/index.tsx","webpack:///../../../src/Circle/useCircle.tsx","webpack:///../../../src/Circle/index.tsx","webpack:///../../../src/CanvasLayer/useCanvasLayer.tsx","webpack:///../../../src/CanvasLayer/index.tsx","webpack:///../../../src/CustomOverlay/useCustomOverlay.tsx","webpack:///../../../src/CustomOverlay/index.tsx","webpack:///../../../src/Marker/useMarker.tsx","webpack:///../../../src/Marker/index.tsx","webpack:///../../../src/Label/useLabel.ts","webpack:///../../../src/Label/index.tsx","webpack:///../../../src/TileLayer/useTileLayer.ts","webpack:///../../../src/TileLayer/index.tsx","webpack:///../../../src/InfoWindow/useInfoWindow.ts","webpack:///../../../src/InfoWindow/index.tsx","webpack:///../../../src/PointCollection/usePointCollection.ts","webpack:///../../../src/PointCollection/index.tsx","webpack:///../../../src/CurveLine/useCurveLine.tsx","webpack:///../../../src/CurveLine/index.tsx","webpack:///../../../src/DrawingManager/useDrawingManager.tsx","webpack:///../../../src/DrawingManager/index.tsx","webpack:///../../../src/Polyline/usePolyline.tsx","webpack:///../../../src/Polyline/index.tsx","webpack:///../../../src/Polygon/usePolygon.tsx","webpack:///../../../src/Polygon/index.tsx","webpack:///../../../src/withMap/index.tsx","webpack:///../../../src/common/useCreatePortal.tsx","webpack:///../../../src/Control/getControl.ts","webpack:///../../../src/Control/useControl.tsx","webpack:///../../../src/Control/index.tsx","webpack:///../../../src/CopyrightControl/useCopyrightControl.tsx","webpack:///../../../src/CopyrightControl/Item.tsx","webpack:///../../../src/CopyrightControl/index.tsx","webpack:///../../../src/NavigationControl/useNavigationControl.tsx","webpack:///../../../src/NavigationControl/index.tsx","webpack:///../../../src/GeolocationControl/useGeolocationControl.tsx","webpack:///../../../src/GeolocationControl/index.tsx","webpack:///../../../src/OverviewMapControl/useOverviewMapControl.tsx","webpack:///../../../src/OverviewMapControl/index.tsx","webpack:///../../../src/ScaleControl/useScaleControl.tsx","webpack:///../../../src/ScaleControl/index.tsx","webpack:///../../../src/MapTypeControl/useMapTypeControl.tsx","webpack:///../../../src/MapTypeControl/index.tsx","webpack:///../../../src/PanoramaControl/usePanoramaControl.tsx","webpack:///../../../src/PanoramaControl/index.tsx","webpack:///../../../src/GroundOverlay/useGroundOverlay.ts","webpack:///../../../src/GroundOverlay/index.tsx","webpack:///./node_modules/@uiw/react-baidu-map/lib/esm/Marker/markers.png"],"names":["headElement","document","_importedScript","src","resolve","script","reject","window","DEFAULT_RETRY_TIME","APILoader","BMap","state","loaded","error","callbackName","color","cfg","protocol","props","queue","task","i","requireScript","err","delay","React","Component","defaultProps","akay","hostAndPath","version","waitQueue","propsName","eName","useState","setState","useEffect","funName","instance","visiable","name","data","preData","eventName","type","eventHandle","ref","useRef","widget","minZoom","maxZoom","mapType","enableHighResolution","enableAutoResize","enableMapClick","map","setMap","zoom","setZoom","container","setContainer","useMemo","item","options","center","setCenter","cent","autoLocalCity","setAutoLocalCity","myCity","result","useEventProperties","useProperties","useEnableProperties","className","style","children","elmRef","useMap","current","useImperativeHandle","childs","fontSize","height","child","radius","strokeColor","fillColor","strokeWeight","strokeOpacity","fillOpacity","strokeStyle","enableMassClear","enableEditing","enableClicking","circle","setCircle","point","opts","useVisiable","useCircle","zIndex","paneName","canvasLayer","setCanvasLayer","update","self","useCanvasLayer","position","offset","panes","width","index","customOverlay","setCustomOverlay","div","setDiv","portal","setPortal","count","setCount","elm","CustomOverlay","getCustomOverlay","portalInstance","ReactDOM","CompOverlay","prevCount","usePrevious","useCustomOverlay","getIcons","icons","imageOffset","anchor","animation","icon","enableDragging","raiseOnDrag","draggingCursor","rotation","shadow","title","marker","setMarker","setType","newIcon","useMarker","label","setLabel","content","useLabel","tileLayer","setTileLayer","transparentPng","tileUrlTemplate","copyright","setVisiable","useTileLayer","infoWindow","setInfoWindow","win","isOpen","setIsOpen","useInfoWindow","EVENTS","shape","size","points","setPoints","pointCollection","setPointCollection","getPoints","evnetName","usePointCollection","curveLine","setCurveLine","libSDK","bMapLib","setBMapLib","loadMapLib","setLoadBMapLib","BMapLib","newMapLib","Object","path","setPath","JSON","useCurveLine","drawingMode","enableDrawingTool","enableCalculate","drawingToolOptions","markerOptions","circleOptions","polylineOptions","polygonOptions","rectangleOptions","drawingManager","setDrawingManager","requireCss","useDrawingManager","polyline","setPolyline","usePolyline","polygon","setPolygon","usePolygon","setChildren","defaultAnchor","defaultOffset","useCreatePortal","control","setControl","Control","getControl","useControl","copyrightControl","setCopyrightControl","uid","bounds","id","prevId","innerHTML","CopyrightControl","useCopyrightControl","navigationControl","setNavigationControl","showZoomInfo","enableGeolocation","useNavigationControl","geolocationControl","setGeolocationControl","showAddressBar","enableAutoLocation","locationIcon","onLocationSuccess","useGeolocationControl","overviewMapControl","setOverviewMapControl","useOverviewMapControl","scaleControl","setScaleControl","useScaleControl","mapTypeControl","setMapTypeControl","mapTypes","useMapTypeControl","panoramaControl","setPanoramaControl","usePanoramaControl","groundOverlay","setGroundOverlay","opacity","imageURL","displayOnMinLevel","displayOnMaxLevel","useGroundOverlay"],"mappings":"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","file":"36.js","sourcesContent":["\nconst headElement = document.head || document.getElementsByTagName('head')[0];\nconst _importedScript: { [src: string]: true } = {};\n\n/**\n * load dependency by css tag\n */\nexport function requireCss(src: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    if (src in _importedScript) {\n      resolve();\n      return\n    }\n    const script = document.createElement('link');\n    script.type = 'text/css';\n    script.rel = \"stylesheet\"\n    script.href = src\n    script.onerror = err => {\n      headElement.removeChild(script);\n      reject(new URIError(`The css ${src} is no accessible.`));\n    }\n    script.onload = () => {\n      _importedScript[src] = true;\n      resolve();\n    }\n    headElement.appendChild(script);\n  })\n}\n\n/**\n * load dependency by script tag\n */\nexport function requireScript(src: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    if (src in _importedScript) {\n      resolve();\n      return\n    }\n    const script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.id = \"_react_baidu_map\"\n    script.src = src;\n    script.onerror = err => {\n      headElement.removeChild(script);\n      reject(new URIError(`The Script ${src} is no accessible.`));\n    }\n    script.onload = () => {\n      _importedScript[src] = true;\n      resolve();\n    }\n    headElement.appendChild(script);\n  })\n}","/**\n * 初始化和加载baidu地图\n */\nimport React from 'react';\nimport { Config } from '../common/map';\nimport { requireScript } from '../utils/requireScript';\n\n\nexport function delay(time: number): Promise<undefined> {\n  return new Promise((resolve, reject) => {\n    window.setTimeout(resolve, time)\n  })\n}\n\nexport interface APILoaderProps extends Config {\n  /**\n   * 用于展示加载中或错误状态\n   */\n  fallback?: (error?: Error) => React.ReactNode\n}\n\ninterface State {\n  loaded: boolean\n  error?: Error\n}\n\nconst DEFAULT_RETRY_TIME = 3\n\n/**\n * APILoader 用于加载百度地图依赖\n */\nexport default class APILoader extends React.Component<APILoaderProps> {\n  public static defaultProps = {\n    akay: '',\n    hostAndPath: 'api.map.baidu.com/api',\n    version: '3.0',\n    callbackName: 'load_bmap_sdk',\n  }\n\n  /**\n   * 全局可能存在多个Loader同时渲染, 但是只能由一个负责加载\n   */\n  private static waitQueue: Array<[Function, Function]> = []\n  /**\n   * 等待BMap就绪\n   */\n  public static async ready() {\n    if (window.BMap) {\n      return\n    }\n    return new Promise((res, rej) => {\n      APILoader.waitQueue.push([res, rej])\n    })\n  }\n\n  public state: State = {\n    loaded: !!window.BMap,\n  }\n\n  public constructor(props: APILoaderProps) {\n    super(props)\n    if (this.props.akay == null) {\n      throw new TypeError('BaiDuMap: akay is required')\n    }\n  }\n\n  public componentDidMount() {\n    const { callbackName } = this.props;\n    if (window.BMap == null) {\n      if (window[callbackName as any]) {\n        APILoader.waitQueue.push([this.finish, this.handleError])\n        return\n      }\n\n      this.loadMap();\n    }\n  }\n\n  public render() {\n    return this.state.loaded ? (\n      this.props.children\n    ) : this.props.fallback ? (\n      this.props.fallback(this.state.error)\n    ) : this.state.error ? (\n      <div style={{ color: 'red' }}>{this.state.error.message}</div>\n    ) : null\n  }\n\n  private getScriptSrc() {\n    const cfg = this.props;\n    let protocol = (cfg.protocol || window.location.protocol) as Config['protocol'];\n    if (protocol!.indexOf(':') === -1) {\n      protocol += ':';\n    }\n    return `${protocol}//${cfg.hostAndPath}?v=${cfg.version}&ak=${cfg.akay}&callback=${cfg.callbackName}`;\n  }\n  /**\n   * load BaiduMap in script tag\n   */\n  private async loadMap() {\n    const { callbackName } = this.props;\n    const src = this.getScriptSrc();\n    (window as any)[callbackName as any] = () => {\n      // flush queue\n      const queue = APILoader.waitQueue\n      APILoader.waitQueue = []\n      queue.forEach(task => task[0]())\n      this.finish()\n    }\n\n    for (let i = 0; i < DEFAULT_RETRY_TIME; i++) {\n      try {\n        await requireScript(src);\n        break\n      } catch (error) {\n        if (i === DEFAULT_RETRY_TIME - 1) {\n          const err = new Error(`Failed to load Baidu Map: ${error.message}`)\n          // flush queue\n          const queue = APILoader.waitQueue\n          APILoader.waitQueue = []\n          queue.forEach(task => task[1](err))\n          this.handleError(err)\n          return\n        }\n        await delay(i * 1000)\n      }\n    }\n  }\n\n  private handleError = (error: Error) => {\n    this.setState({ error })\n  }\n\n  private finish = () => {\n    this.setState({\n      loaded: true,\n    })\n  }\n}\n","import React, { useEffect, useState, useRef } from 'react';\n\n/**\n * 批量创建多个如下 State，监听并设置值，\n * 组件属性更改 <Componet enableDragging={true} >\n * 根据 enableDragging 的 Boolean 值，执行 `enable` 和 `disable` 开头的函数。\n * @example\n * ```js\n * const [enableDragging, setEnableDragging] = useState(props.enableDragging);\n * useEffect(() => {\n *   console.log('~~:enableDragging', enableDragging, props.enableDragging, polyline);\n *   setEnableDragging(props.enableDragging)\n * }, [polyline, enableDragging, props.enableDragging]);\n * ```\n * @param instance \n * @param props \n * @param propsName \n */\nexport function useEnableProperties<T = {}, F = {}>(instance: T, props = {} as F, propsName: string[] = []) {\n  propsName.forEach((name) => {\n    const eName = `enable${name}` as keyof F;\n    const [state, setState] = useState(props[eName]);\n    useEffect(() => {\n      const funName = (props[eName] ? `enable${name}` : `disable${name}`) as keyof T;\n      if (instance && props[eName] !== undefined) {\n        instance[funName] && (instance[funName] as any)();\n        if(props[eName] !== state) {\n          setState(props[eName]);\n        }\n      }\n    }, [instance, props[eName]]);\n  });\n}\n\n/**\n * 针对 Overlay 类型的组件，有公共的是否显示 对象处理\n * 通过参数 `visiable` 来控制执行 `show()` or `hide()`\n */\nexport function useVisiable<T extends BMap.Overlay, F extends { visiable?: boolean; }>(instance: T, props = {} as F) {\n  const visiable = (props as any).visiable;\n  const [state, setState] = useState(visiable);\n  useEffect(() => {\n    if (instance && visiable !== undefined) {\n      if (visiable) {\n        instance.show && instance.show();\n      } else {\n        instance.hide && instance.hide();\n      }\n      if(visiable !== state) {\n        setState(visiable);\n      }\n    }\n  }, [instance, visiable]);\n}\n\n/**\n * 批量创建多个如下 State，监听并设置值，\n * 执行 `set` 开头的函数。\n * @param instance \n * @param props \n * @param propsName \n */\nexport function useProperties<T, F>(instance: T, props: F, propsName: string[] = []) {\n  propsName.forEach((name) => {\n    const eName = `${name.charAt(0).toLowerCase()}${name.slice(1)}` as keyof F;\n    const [state, setState] = useState(props[eName]);\n    useEffect(() => {\n      if (instance && instance[`set${name}` as keyof T] && props[eName] !== undefined) {\n        /**\n         * 坐标点的参数设置，比对, 坐标点的参数设置\n         */\n        let data: any = props[eName];\n        if(data && data.lng && data.lat) {\n          data = new BMap.Point(data.lng, data.lat);\n          let preData: any = state;\n          if (preData && preData.lng && preData.lat) {\n            preData = new BMap.Point(preData.lng, preData.lat);\n            if (data.equals(preData)) {\n              return;\n            }\n          }\n        }\n\n        (instance[`set${name}` as keyof T] as any)(data);\n        // 属性发生变化缓存\n        if (state !== props[eName]) {\n          if (eName === 'bounds') {\n            if (state && props[eName] && !(state as any).equals(props[eName])) {\n              setState(props[eName]);\n            }\n          } else {\n            setState(props[eName]);\n          }\n        }\n      }\n    }, [instance, props[eName]]);\n  });\n}\n\nexport interface EventListener {\n  /**\n   * 添加事件监听函数\n   * @param event \n   * @param handler \n   */\n  addEventListener(event: string, handler: any): void;\n  /**\n   * 移除事件监听函数\n   * @param event \n   * @param handler \n   */\n  removeEventListener(event: string, handler: any): void;\n}\n\nexport type EventNameType = 'CamelCase' | 'PascalCase' | 'LowerCase';\n\n/**\n * 绑定事件\n * @param instance 实例对象\n * @param props 传递进来的 props\n * @param eventName 事件的名字，如，我们使用 `onClick` 事件，最终被转换成，`click` 绑定到实例中，`onDblClick` => `dblclick`\n * \n * @example\n * ```js\n * useEventProperties<BMap.Marker, UseMarker>(marker!, props, [\n *   'Click', 'DblClick', 'MouseDown', 'MouseUp', 'MouseOut', 'MouseOver'\n * ]);\n * ```\n */\nexport function useEventProperties<T extends EventListener, F>(instance: T, props = {} as F, eventName: string[] = [], type?: EventNameType) {\n  eventName.forEach((name) => {\n    const eventName = `on${name}` as keyof F;\n    const eventHandle = props[eventName];\n    useEffect(() => {\n      if(!instance) return;\n      if (eventHandle && name) {\n        let eName = name;\n        if (type === 'CamelCase') {\n          eName = name.replace(name[0],name[0].toLowerCase())\n        } else {\n          eName = name.toLowerCase();\n        }\n        instance.addEventListener(eName, eventHandle);\n        return () => {\n          instance.removeEventListener(eName, eventHandle);\n        }\n      }\n    }, [instance, props[eventName]]);\n  });\n\n}\n\n/**\n * 获取上一轮的 props 或 state\n * How to get the previous props or state?\n * https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\n * @example\n * ```js\n * function Counter() {\n *   const [count, setCount] = useState(0);\n *   const prevCount = usePrevious(count);\n *   return <h1>Now: {count}, before: {prevCount}</h1>;\n * }\n * ```\n */\nexport function usePrevious<T>(value: T) {\n  const ref = useRef<T>();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}","import { useEffect, useState, useMemo } from 'react';\nimport { MapChildProps } from '../common/map';\nimport { MapProps } from './';\nimport { useEnableProperties, useProperties, useEventProperties } from '../common/hooks';\n\nexport interface UseMap extends MapProps, MapChildProps {\n  /**\n   * 指定的容器\n   */\n  container?: string | HTMLDivElement;\n}\n\nexport default (props: UseMap = {}) => {\n  const { widget, minZoom, maxZoom, mapType, enableHighResolution, enableAutoResize, enableMapClick } = props;\n  const [map, setMap] = useState<BMap.Map>();\n  const [zoom, setZoom] = useState(props.zoom || 15);\n  const [container, setContainer] = useState(props.container);\n  useMemo(() => {\n    if (container && !map && BMap) {\n      const instance = new BMap.Map(container, { minZoom, maxZoom, mapType, enableHighResolution, enableAutoResize, enableMapClick });\n      /**\n       * 加载控件\n       */\n      widget && widget.forEach((item) => {\n        if(typeof item === 'string') {\n          instance.addControl(new (BMap[item] as any)()); \n        } else if (typeof item === 'object' && item.control && typeof item.control === 'function') {\n          instance.addControl(item.control(BMap, instance));\n        } else if (typeof item === 'object' && item.name) {\n          const options = typeof item.options === 'function' ? item.options(BMap, instance) : item.options;\n          instance.addControl(new (BMap[item.name] as any)(options)); \n        }\n      });\n      setMap(instance);\n    }\n  }, [container, map]);\n\n  const [center, setCenter] = useState(props.center || '上海');\n  /**\n   * 根据参数设置中心点\n   */\n  useEffect(() => {\n    if (map && center) {\n      let cent = center;\n      if (center && (center as BMap.Point).lng && (center as BMap.Point).lat) {\n        cent = new BMap.Point((center as BMap.Point).lng, (center as BMap.Point).lat);\n      }\n      map.centerAndZoom(cent!, zoom!);\n    }\n  }, [center, map]);\n  \n  const [autoLocalCity, setAutoLocalCity] = useState(props.autoLocalCity);\n  /**\n   * IP定位获取当前城市，进行自动定位\n   */\n  useEffect(() => {\n    if (map && autoLocalCity) {\n      const myCity = new BMap.LocalCity();\n      myCity.get((result) => {\n        setCenter(result.name as any);\n        setZoom(result.level as any);\n        setAutoLocalCity(false);\n      });\n    }\n  }, [autoLocalCity, map]);\n\n  useEventProperties<BMap.Map, UseMap>(map!, props, [\n    'Click', 'DblClick', 'RightClick', 'RightdblClick', 'MapTypeChange',\n    'MouseMove', 'MouseOver', 'MouseOut', 'MoveStart',\n    'Moving', 'MoveEnd', 'ZoomStart', 'ZoomEnd', 'AddOverlay', 'AddControl',\n    'RemoveControl', 'RemoveOverlay', 'ClearOverlays', 'DragStart', 'Dragging', 'DragEnd',\n    'AddTileLayer', 'RemoveTileLayer', 'Load', 'ReSize',\n    'HotspotClick', 'HotspotOver', 'HotspotOut',\n    'TilesLoaded', 'TouchStart', 'TouchMove', 'TouchEnd', 'LongPress',\n  ]);\n  // 'Center',\n  useProperties<BMap.Map, UseMap>(map!, props, ['DefaultCursor', 'DraggingCursor', 'MinZoom', 'MaxZoom', 'MapStyle', 'MapStyleV2', 'Panorama', 'CurrentCity', 'MapType', 'Viewport', 'Zoom']);\n  useEnableProperties<BMap.Map, UseMap>(map!, props, ['Dragging', 'ScrollWheelZoom', 'DoubleClickZoom', 'Keyboard', 'InertialDragging', 'ContinuousZoom', 'PinchToZoom', 'AutoResize']);\n  return {\n    map, setMap,\n    container, setContainer,\n    center, setCenter,\n    autoLocalCity, setAutoLocalCity,\n  }\n}","/// <reference types=\"../types\" />\n\nimport React, { useRef, useEffect, useImperativeHandle, Fragment } from 'react';\nimport useMap from './useMap';\n\nexport interface Control {\n  Control: BMap.Control;\n  NavigationControl: BMap.NavigationControlOptions;\n  OverviewMapControl: BMap.OverviewMapControlOptions;\n  ScaleControl: BMap.ScaleControlOptions;\n  MapTypeControl: BMap.MapTypeControlOptions;\n  CopyrightControl: BMap.CopyrightControlOptions;\n  GeolocationControl: BMap.GeolocationControlOptions;\n}\n\nexport type ControlOptions = {\n  name: keyof Control;\n  options?: (bmap: typeof BMap, map: BMap.Map) => void ;\n  control?(bmap: typeof BMap, map: BMap.Map): BMap.Control;\n} | {\n  name: keyof Control;\n  options?: Control[keyof Control] ;\n  control?(bmap: typeof BMap, map: BMap.Map): BMap.Control;\n}\n\nexport type ControlOptionsAll = keyof Control | ControlOptions;\n\nexport interface MapProps extends BMap.MapOptions, BMap.MapEvents {\n  className?: React.HTMLAttributes<HTMLDivElement>['className'];\n  style?: React.HTMLAttributes<HTMLDivElement>['style'];\n  /**\n   * 百度地图上负责与地图交互的UI元素称为控件。\n   */\n  widget?: (ControlOptionsAll | ControlOptions)[];\n  /**\n   * 缩放等级\n   */\n  zoom?: number;\n  /**\n   * 定位, 可使用如 `上海市` 的地区字符串，\n   * 也可以使用对象如 `{lng: 121.424333, lat: 31.228604}` 表示经纬度\n   */\n  center?: string | BMap.Point;\n  /**\n   * IP定位获取当前城市，进行自动定位\n   */\n  autoLocalCity?: boolean;\n  children?: React.ReactNode;\n  /**\n   * 启用地图拖拽，默认启用\n   */\n  enableDragging?: boolean;\n  /**\n   * 启用滚轮放大缩小，默认禁用\n   */\n  enableScrollWheelZoom?: boolean;\n  /**\n   * 启用双击放大，默认启用\n   */\n  enableDoubleClickZoom?: boolean;\n  /**\n   * 启用地图惯性拖拽，默认禁用\n   */\n  enableInertialDragging?: boolean;\n  /**\n   * 启用连续缩放效果，默认禁用\n   */\n  enableContinuousZoom?: boolean;\n  /**\n   * 启用双指操作缩放，默认启用\n   */\n  enablePinchToZoom?: boolean;\n  /**\n   * 启用键盘操作，默认禁用。键盘的上、下、左、右键可连续移动地图。同时按下其中两个键可使地图进行对角移动。\n   * PgUp、PgDn、Home和End键会使地图平移其1/2的大小。+、-键会使地图放大或缩小一级\n   */\n  enableKeyboard?: boolean;\n  /**\n   * 设置地图个性化样式V2版本，仅支持现代浏览器（支持Canvas）\n   */\n  mapStyleV2?: BMap.MapStyleV2;\n  /**\n   * 设置地图城市，注意当地图初始化时的类型设置为 `BMAP_NORMAL_MAP` 时，\n   * 需要在调用 `centerAndZoom` 之前调用此方法设置地图所在城市。\n   * 例如： \n   * @example\n   * \n   * ```js\n   * var map = new BMap.Map(“container”, { mapType: BMAP_NORMAL_MAP });\n   * map.setCurrentCity(“北京市”);\n   * map.centerAndZoom(new BMap.Point(116.404, 39.915), 18);\n   * ```\n   * \n   * 注意：初始化的坐标应与您设置的城市对应，否则地图将无法正常显示。\n   */\n  currentCity?: string;\n  /**\n   * 将全景实例与Map类进行绑定\n   */\n  panorama?: BMap.Panorama;\n}\n\ntype RenderProps =\n  | { children?: (data: { BMap: typeof BMap, map: BMap.Map, container?: string | HTMLDivElement | null }) => void }\n  | { children?: React.ReactNode };\n\nexport default React.forwardRef<MapProps & { map?: BMap.Map }, MapProps & RenderProps>(({ className, style, children, ...props }, ref) => {\n  const elmRef = useRef<HTMLDivElement>(null);\n  const { setContainer, container, setCenter, setAutoLocalCity, map } = useMap({ container: elmRef.current as (string | HTMLDivElement), ...props });\n  useEffect(() => setContainer(elmRef.current as string | HTMLDivElement | undefined), [elmRef.current]);\n  useEffect(() => { props.center && setCenter(props.center) }, [props.center]);\n  useEffect(() => setAutoLocalCity(props.autoLocalCity!), [props.autoLocalCity]);\n  useImperativeHandle(ref, () => ({ ...props, map, BMap, container: elmRef }), [map]);\n  const childs = React.Children.toArray(children);\n  return (\n    <Fragment>\n      <div ref={elmRef} className={className} style={{ fontSize: 1, height: '100%', ...style}} />\n      {BMap && map && typeof children === 'function' && children({ BMap, map, container })}\n      {BMap && map && childs.map((child) => {\n        if (!React.isValidElement(child)) return;\n        return React.cloneElement(child, {\n          ...child.props, BMap, map, container,\n        });\n      })}\n    </Fragment>\n  );\n});\n","import { useState, useEffect, useMemo } from 'react';\nimport { CircleProps } from './';\nimport { useEnableProperties, useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UseCircle extends CircleProps {}\n\nexport default (props = {} as UseCircle) => {\n  const {\n    map, center, radius,\n    strokeColor, fillColor, strokeWeight, strokeOpacity, fillOpacity, strokeStyle, enableMassClear, enableEditing, enableClicking\n  } = props;\n  const [circle, setCircle] = useState<BMap.Circle>();\n\n  useMemo(() => {\n    if (map && !circle) {\n      let point = center;\n      if(center && center.lng && center.lat) {\n        point = new BMap.Point(center.lng, center.lat);\n      }\n      const opts = { strokeColor, fillColor, strokeWeight, strokeOpacity, fillOpacity, strokeStyle, enableMassClear, enableEditing, enableClicking };\n      const instance = new BMap.Circle(point, radius, opts);\n      map.addOverlay(instance);\n      setCircle(instance);\n    }\n  }, [map, circle]);\n\n  useVisiable(circle!, props);\n  useEventProperties<BMap.Circle, UseCircle>(circle!, props, [\n    'Click', 'DblClick',\n    'MouseDown', 'MouseUp', 'MouseOut', 'MouseOver',\n    'Remove', 'LineUpdate',\n  ]);\n  useEnableProperties<BMap.Circle, UseCircle>(circle!, props, ['Editing', 'MassClear']);\n  useProperties<BMap.Circle, UseCircle>(circle!, props, ['Center', 'Radius', 'StrokeColor', 'FillColor', 'StrokeOpacity', 'FillOpacity', 'StrokeWeight', 'StrokeStyle']);\n\n  return {\n    circle, setCircle,\n  }\n}\n\n","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useCircle from './useCircle';\n\nexport interface CircleProps extends OverlayProps, BMap.CircleOptions, BMap.CircleEvents {\n  /**\n   * 设置折线的点数组\n   */\n  center: BMap.Point;\n  /**\n   * 设置圆形的半径，单位为米\n   */\n  radius: number;\n}\n\nexport default React.forwardRef<CircleProps & { circle?: BMap.Circle }, CircleProps>((props, ref) => {\n  const { circle } = useCircle(props);\n  useImperativeHandle(ref, () => ({ ...props, circle }));\n  return null;\n});\n","import { useState, useMemo } from 'react';\nimport { CanvasLayerProps } from '.';\nimport { useVisiable } from '../common/hooks';\n\nexport interface UseCanvasLayer extends CanvasLayerProps {}\n\nexport interface CanvasLayerResult {\n  canvas: React.HTMLAttributes<HTMLCanvasElement>;\n  ba: React.HTMLAttributes<HTMLCanvasElement>;\n  options: BMap.CanvasLayerOptions;\n  zIndex: number;\n  map: UseCanvasLayer['map'];\n  BMap: UseCanvasLayer['BMap'];\n}\n\nexport default (props = {} as UseCanvasLayer) => {\n  const { map, zIndex, paneName } = props;\n  const [canvasLayer, setCanvasLayer] = useState<BMap.CanvasLayer>();\n  useMemo(() => {\n    if (map && BMap && !canvasLayer) {\n      const update = function (this: CanvasLayerResult) {\n        const self = this;\n        props.update && props.update({ ...self, BMap, map });\n      }\n      const instance = new BMap.CanvasLayer({ zIndex, paneName, update });\n      map.addOverlay(instance);\n      setCanvasLayer(instance);\n    }\n  }, [map, canvasLayer]);\n\n  useVisiable(canvasLayer!, props);\n\n  return {\n    canvasLayer, setCanvasLayer,\n  }\n}\n\n","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useCanvasLayer, { CanvasLayerResult } from './useCanvasLayer';\n\nexport interface Argument extends CanvasLayerResult {}\n\nexport interface CanvasLayerProps extends Omit<BMap.CanvasLayerOptions, 'update'>, OverlayProps {\n  update?(argument: Argument): void; \n}\n\nexport default React.forwardRef<CanvasLayerProps & { canvasLayer?: BMap.CanvasLayer }, CanvasLayerProps>((props, ref) => {\n  const { canvasLayer } = useCanvasLayer(props);\n  useImperativeHandle(ref, () => ({ ...props, canvasLayer }));\n  return null;\n});\n","import { useState, useMemo } from 'react';\nimport ReactDOM from 'react-dom';\nimport { CustomOverlayProps } from './';\nimport { useProperties, usePrevious } from '../common/hooks';\n\nfunction getCustomOverlay() {\n  return class extends BMap.Overlay {\n    public container: HTMLDivElement;\n    public map!: BMap.Map;\n    public paneName: keyof BMap.MapPanes;\n    public position?: BMap.Point;\n    public offset?: BMap.Size;\n    constructor(elm: HTMLDivElement, position?: BMap.Point, paneName?: CustomOverlayProps['paneName']) {\n      super();\n      this.container = elm;\n      this.paneName = paneName || 'markerPane';\n      this.position = position;\n    }\n    public initialize: (map: BMap.Map) => HTMLElement = (map) => {\n      const panes = map.getPanes();\n      this.container.style.position = 'absolute';\n      this.map = map;\n      panes[this.paneName]!.appendChild(this.container);\n      return this.container;\n    }\n    public draw = () => {\n      if (this.position == null || this.map == null) {\n        return\n      }\n      const position = this.map.pointToOverlayPixel(this.position);\n      const { width = 0, height = 0 } = this.offset || {}\n\n      this.container.style.left = `${position.x + width}px`;\n      this.container.style.top = `${position.y + height}px`;\n    }\n    public setOffset = (offset: BMap.Size) => {\n      this.offset = offset;\n      this.draw();\n    }\n    public setPosition = (position: BMap.Point) => {\n      this.position = position;\n      this.draw();\n    }\n    public setVisiable = (visiable: boolean) => {\n      this.container.style.display = visiable ? 'block' : 'none';\n    }\n\n    public getPosition = () => {\n      return this.position;\n    }\n\n    public setZIndex = (index: number) => {\n      this.container.style.zIndex = index.toString();\n    }\n  }\n}\n\nexport interface UseCustomOverlay extends CustomOverlayProps {}\n\nexport default (props = {} as UseCustomOverlay) => {\n  const { map, children, paneName, position } = props;\n  const [customOverlay, setCustomOverlay] = useState<BMap.Overlay>();\n  const [div, setDiv] = useState<HTMLDivElement>();\n  const [portal, setPortal] = useState<React.ReactPortal>();\n  const [count, setCount] = useState(0);\n  useMemo(() => {\n    if (map && !portal) {\n      const elm = document.createElement('div');\n      const CustomOverlay = getCustomOverlay();\n      const portalInstance = ReactDOM.createPortal(children, elm);\n      const CompOverlay = new CustomOverlay(elm, position, paneName);\n      setCount(count + 1);\n      setDiv(elm);\n      map.addOverlay(CompOverlay);\n      setPortal(portalInstance);\n      setCustomOverlay(CompOverlay);\n    }\n  }, [map, portal]);\n\n  const prevCount = usePrevious(count);\n  useMemo(() => {\n    if (map && div && children && count === prevCount) {\n      const portalInstance = ReactDOM.createPortal(children, div);\n      setPortal(portalInstance);\n      setCount(count + 1);\n    }\n  }, [children, customOverlay]);\n\n  useProperties<BMap.Overlay, UseCustomOverlay>(customOverlay!, props, ['ZIndex', 'Offset', 'Position', 'Visiable']);\n  return {\n    portal, setPortal,\n    customOverlay, setCustomOverlay\n  }\n}\n\n","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useCustomOverlay from './useCustomOverlay';\n\n\nexport interface CustomOverlayProps extends OverlayProps {\n  /**\n   * 设置标注的地理坐标。\n   */\n  position?: BMap.Point;\n  /**\n   * 对应 css z-index 属性，当添加了多个 CustomOverlay 时，可以用于设置层叠顺序\n   */\n  zIndex?: number;\n  /**\n   * \n   * 覆盖物层级\n   * JSAPI 把地图覆盖物分为了8个层级，顶层为 `floatPane`，\n   * 低层为 `vertexPane`。可以通过Map实例的 `getPanes()` 方法，获取到8个层级的名称\n   */\n  paneName?: keyof BMap.MapPanes;\n  /**\n   * 覆盖物是否可见。\n   */\n  visiable?: boolean;\n  /**\n   * 自定义 DOM 元素。\n   */\n  children?: React.ReactNode;\n}\n\nexport default React.forwardRef<CustomOverlayProps, CustomOverlayProps>((props, ref) => {\n  const { customOverlay, portal } = useCustomOverlay(props);\n  useImperativeHandle(ref, () => ({ ...props, customOverlay }), [customOverlay]);\n  if (portal) {\n    return portal;\n  }\n  return null;\n})","import { useState, useEffect, useMemo } from 'react';\nimport defaultIconUrl from './markers.png';\nimport { MarkerProps } from '.';\nimport { useEnableProperties, useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UseMarker extends MarkerProps{}\n\nconst getIcons = (name: string) => {\n  const icons = {\n    'simple_red': new BMap.Icon(defaultIconUrl , new BMap.Size(42 / 2, 66 / 2), {\n      imageOffset: new BMap.Size(-454 / 2, -378 / 2),\n      anchor: new BMap.Size(42 / 2 / 2, 66 / 2),\n    }),\n    'simple_blue': new BMap.Icon(defaultIconUrl , new BMap.Size(42 / 2, 66 / 2), {\n      imageOffset: new BMap.Size(-454 / 2, -450 / 2),\n      anchor: new BMap.Size(42 / 2 / 2, 66 / 2),\n    }),\n    'loc_red': new BMap.Icon(defaultIconUrl , new BMap.Size(46 / 2, 70 / 2), {\n      imageOffset: new BMap.Size(-400 / 2, -378 / 2),\n      anchor: new BMap.Size(46 / 2 / 2, 70 / 2),\n    }),\n    'loc_blue': new BMap.Icon(defaultIconUrl , new BMap.Size(46 / 2, 70 / 2), {\n      imageOffset: new BMap.Size(-400 / 2, -450 / 2),\n      anchor: new BMap.Size(46 / 2 / 2, 70 / 2),\n    }),\n    'dot_red': new BMap.Icon(defaultIconUrl , new BMap.Size(16 / 2, 16 / 2), {\n      imageOffset: new BMap.Size(-216 / 2, -466 / 2),\n      anchor: new BMap.Size(16 / 2 / 2, 16 / 2),\n    }),\n    'dot_blue': new BMap.Icon(defaultIconUrl , new BMap.Size(16 / 2, 16 / 2), {\n      imageOffset: new BMap.Size(-216 / 2, -486 / 2),\n      anchor: new BMap.Size(16 / 2 / 2, 16 / 2),\n    }),\n    'start': new BMap.Icon(defaultIconUrl , new BMap.Size(50 / 2, 80 / 2), {\n      imageOffset: new BMap.Size(-400 / 2, -278 / 2),\n      anchor: new BMap.Size(50 / 2 / 2, 80 / 2),\n    }),\n    'end': new BMap.Icon(defaultIconUrl , new BMap.Size(50 / 2, 80 / 2), {\n      imageOffset: new BMap.Size(-450 / 2, -278 / 2),\n      anchor: new BMap.Size(50 / 2 / 2, 80 / 2),\n    }),\n    'location': new BMap.Icon(defaultIconUrl , new BMap.Size(28 / 2, 40 / 2), {\n      imageOffset: new BMap.Size(-248 / 2, -466 / 2),\n      anchor: new BMap.Size(28 / 2 / 2, 40 / 2),\n    }),\n  }\n\n  for (var i = 1; i <= 10; i++) {\n    (icons as any)['red' + i] = new BMap.Icon(defaultIconUrl , new BMap.Size(42 / 2, 66 / 2), {\n      imageOffset: new BMap.Size(0 - 42 / 2 * (i - 1), 0),\n      anchor: new BMap.Size(42 / 2 / 2, 66 / 2),\n    });\n  }\n\n  for (var i = 1; i <= 10; i++) {\n    (icons as any)['blue' + i] = new BMap.Icon(defaultIconUrl , new BMap.Size(42 / 2, 66 / 2), {\n      imageOffset: new BMap.Size(0 - 42 / 2 * (i - 1), - 132 / 2),\n      anchor: new BMap.Size(42 / 2 / 2, 66 / 2),\n    });\n  }\n  return icons[name as keyof typeof icons];\n}\n\nexport default (props = {} as UseMarker) => {\n  const {\n    map, position, animation,\n    offset, icon, enableMassClear, enableDragging, enableClicking, raiseOnDrag, draggingCursor, rotation, shadow, title,\n  } = props;\n\n  const [marker, setMarker] = useState<BMap.Marker>();\n  const options = { offset, icon, enableMassClear, enableDragging, enableClicking, raiseOnDrag, draggingCursor, rotation, shadow, title };\n  useMemo(() => {\n    if (!BMap || !map) return;\n    if (!marker) {\n      const point = new BMap.Point(position.lng, position.lat);\n      const marker = new BMap.Marker(point, options);\n      map.addOverlay(marker);\n      marker.setAnimation(animation);\n      setMarker(marker);\n    }\n  }, [map, marker]);\n\n  const [type, setType] = useState(props.type || 'loc_blue');\n  /**\n   * 设置标注点 `图标`\n   */\n  useEffect(() => {\n    if(map && marker && !icon && type) {\n      const newIcon = getIcons(type as string);\n      newIcon.setImageSize(new BMap.Size(600 / 2, 600 / 2));\n      marker.setIcon(newIcon);\n    }\n  }, [type, marker]);\n  useVisiable(marker!, props);\n  useEventProperties<BMap.Marker, UseMarker>(marker!, props, [\n    'Click', 'DblClick', 'MouseDown', 'MouseUp', 'MouseOut', 'MouseOver', 'Remove',\n    'InfowindowClose', 'InfowindowOpen', 'DragStart', 'Dragging', 'DragEnd', 'RightClick',\n  ]);\n  useEnableProperties<BMap.Marker, UseMarker>(marker!, props, ['Dragging', 'MassClear', 'Clicking']);\n  useProperties<BMap.Marker, UseMarker>(marker!, props, ['Icon', 'Position', 'Animation', 'Offset', 'Label', 'Title', 'Top', 'ZIndex', 'Rotation', 'Shadow']);\n\n  return {\n    marker, setMarker,\n    type, setType,\n  }\n}","import React, { useEffect, useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useMarker from './useMarker';\n\nexport interface MarkerProps extends OverlayProps, BMap.MarkerOptions {\n  /**\n   * **`必填`** 设置标注的地理坐标。\n   */\n  position: BMap.Point;\n  /**\n   * 此常量表示标注的动画效果。\n   */\n  animation?: BMap.Animation;\n  /**\n   * 标点类型\n   */\n  type?: 'location' | 'end' | 'start' | 'simple_red' | 'simple_blue' | 'loc_blue' | 'loc_red' | 'dot_red' | 'dot_blue'\n    | 'red1' | 'red2' | 'red3' | 'red4' | 'red5' | 'red6' | 'red7' | 'red8' | 'red9'\n    | 'blue1' | 'blue2' | 'blue3' | 'blue4' | 'blue5' | 'blue6' | 'blue7' | 'blue8' | 'blue9';\n}\n\nexport default React.forwardRef<MarkerProps & { marker?: BMap.Marker}, MarkerProps>((props, ref) => {\n  const { marker, setType } = useMarker(props);\n  useEffect(() => props.type && setType(props.type), [props.type]);\n  useImperativeHandle(ref, () => ({ ...props, marker }));\n  return null;\n});\n","import { useMemo, useState } from 'react';\nimport { LabelProps } from './';\nimport { useEnableProperties, useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UseLabel extends LabelProps {}\n\nexport default (props = {} as UseLabel) => {\n  const [label, setLabel] = useState<BMap.Label>();\n  const { map, offset, style, content, position, enableMassClear } = props;\n\n  useMemo(() => {\n    if (!BMap || !map) return;\n    if (!label) {\n      const opts = { offset, position, enableMassClear };\n      const instance = new BMap.Label(content || '', opts);\n      instance.setStyle({ ...style });\n      map.addOverlay(instance);\n      setLabel(instance);\n    }\n  }, [map]);\n\n  useVisiable(label!, props);\n  useEventProperties<BMap.Label, UseLabel>(label!, props, [\n    'Click', 'DblClick', 'MouseDo', 'MouseUp', 'MouseOout', 'MouseO', 'Remove', 'RightClick'\n  ]);\n  useProperties<BMap.Label, UseLabel>(label!, props, [\n    'Style', 'Content', 'Position', 'Offset', 'Title', 'ZIndex'\n  ]);\n  useEnableProperties<BMap.Label, UseLabel>(label!, props, ['MassClear']);\n\n  return {\n    label, setLabel\n  };\n}","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useLabel from './useLabel';\n\n\nexport interface LabelProps extends OverlayProps, BMap.LabelOptions, BMap.LabelEvents {\n  /**\n   * 文本标注内容\n   */\n  content?: string;\n  /**\n   * 文本标注样式，该样式将作用于文本标注的容器元素上。\n   * 其中styles为JavaScript对象常量，比如： setStyle({ color : \"red\", fontSize : \"12px\" }) \n   * 注意：如果css的属性名中包含连字符，需要将连字符去掉并将其后的字母进行大写处理，\n   * 例如：背景色属性要写成：backgroundColor\n   */\n  style?: HTMLDivElement['style'];\n}\n\nexport default React.forwardRef<LabelProps & { label?: BMap.Label }, LabelProps>((props, ref) => {\n  const { label } = useLabel(props);\n  useImperativeHandle(ref, () => ({ ...props, label }), [label]);\n  return null;\n})","import { useEffect, useState } from 'react';\nimport { TileLayerProps } from './';\n\nexport interface UseTileLayer extends TileLayerProps {}\n/**\n * https://lbsyun.baidu.com/jsdemo.htm#g0_2\n */\nexport default function(props = {} as UseTileLayer) {\n  const [tileLayer, setTileLayer] = useState<BMap.TileLayer>();\n  const { map, transparentPng = true, tileUrlTemplate, copyright, zIndex } = props;\n\n  useEffect(() => {\n    if (map && !tileLayer) {\n      const instance = new BMap.TileLayer({\n        transparentPng, tileUrlTemplate, copyright, zIndex\n      });\n      if (!!props.getTilesUrl) {\n        instance.getTilesUrl = props.getTilesUrl;\n      }\n      if (!!props.getCopyright) {\n        instance.getCopyright = props.getCopyright;\n      }\n      map.addTileLayer(instance);\n      setTileLayer(instance);\n      return () => {\n        if (instance) {\n          map.removeTileLayer(instance);\n        }\n      }\n    }\n  }, [map]);\n\n\n  const [visiable, setVisiable] = useState(props.visiable);\n  useEffect(() => {\n    if (map && tileLayer) {\n      visiable ? map.addTileLayer(tileLayer) : map.removeTileLayer(tileLayer);\n    }\n  }, [visiable, map]);\n  \n\n  return {\n    tileLayer, setTileLayer,\n    visiable, setVisiable,\n  };\n}","import React, { useImperativeHandle, useEffect } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useTileLayer from './useTileLayer';\n\nexport interface TileLayerProps extends OverlayProps, BMap.TileLayerOptions, BMap.TileLayer {\n  visiable?: boolean;\n}\n\nexport default React.forwardRef<TileLayerProps, TileLayerProps>((props, ref) => {\n  const { tileLayer, setVisiable, } = useTileLayer(props);\n  useImperativeHandle(ref, () => ({ ...props, tileLayer }), [tileLayer]);\n  useEffect(() => setVisiable(props.visiable!), [props.visiable]);\n  return null;\n});\n","import { useState, useEffect, useMemo } from 'react';\nimport { InfoWindowProps } from './';\nimport { useEnableProperties, useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UseInfoWindow extends InfoWindowProps {}\n\nexport default (props = {} as UseInfoWindow) => {\n  const { map, position, ...opts } = props;\n  const [infoWindow, setInfoWindow] = useState<BMap.InfoWindow>();\n  useMemo(() => {\n    if (!BMap || !map) return;\n    if (!infoWindow) {\n      const win = new BMap.InfoWindow('', { ...opts })\n      setInfoWindow(win);\n    }\n  }, [map]);\n\n  const [isOpen, setIsOpen] = useState(opts.isOpen === undefined ? true : opts.isOpen);\n  useEffect(() => {\n    if (map && BMap && infoWindow) {\n      if(!isOpen) {\n        map.closeInfoWindow();\n      } else if (position) {\n        const point = new BMap.Point(position.lng, position.lat);\n        map.openInfoWindow(infoWindow, point);\n      }\n    }\n  }, [isOpen, infoWindow]);\n\n  useVisiable(infoWindow!, props);\n  useEventProperties<BMap.InfoWindow, UseInfoWindow>(infoWindow!, props, [\n    'Close', 'Open', 'Maximize', 'Restore', 'ClickClose'\n  ]);\n  useProperties<BMap.InfoWindow, UseInfoWindow>(infoWindow!, props, [\n    'Width', 'Height', 'Title', 'Content', 'MaxContent'\n  ]);\n  useEnableProperties<BMap.InfoWindow, UseInfoWindow>(infoWindow!, props, ['CloseOnClick', 'Maximize', 'AutoPan']);\n\n  return {\n    /**\n     * 信息窗口实例对象\n     */\n    infoWindow,\n    /**\n     * 更新 信息窗口实例对象\n     */\n    setInfoWindow, isOpen, setIsOpen\n  }\n}","import React, { useEffect, useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useInfoWindow from './useInfoWindow';\n\nexport interface InfoWindowProps extends OverlayProps, BMap.InfoWindowOptions, BMap.InfoWindowEvent {\n  /**\n   * 窗口是否打开\n   * @default true\n   */\n  isOpen?: boolean;\n  /**\n   * 窗口位置经纬度\n   */\n  position: BMap.Point;\n  /**\n   * 展示文本内容，支持 HTML 内容字符串\n   */\n  content?: string;\n  /**\n   * 信息窗口最大化时所显示内容，支持HTML内容\n   */\n  maxContent?: string;\n}\n\nexport default React.forwardRef<InfoWindowProps & { infoWindow?: BMap.InfoWindow }, InfoWindowProps>((props, ref) => {\n  const { infoWindow, setIsOpen } = useInfoWindow(props);\n  useEffect(() => setIsOpen(props.isOpen!), [props.isOpen]);\n  useImperativeHandle(ref, () => ({ ...props, infoWindow }));\n  return null;\n});\n","import React, { useState, useEffect } from 'react';\nimport { PointCollectionProps } from './';\nimport { useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nconst EVENTS = ['onClick', 'onMouseOver', 'onMouseOut'];\n\nexport interface UsePointCollection extends PointCollectionProps {}\n\nexport default (props = {} as UsePointCollection) => {\n  const { map, shape, color, size } = props;\n  const [points, setPoints] = useState(props.points);\n  const [pointCollection, setPointCollection] = useState<BMap.PointCollection>();\n\n  const getPoints = (data: [number, number][] = []) => {\n    const result: BMap.Point[] = [];\n    data.forEach((item) => {\n      result.push(new BMap.Point(item[0], item[1]))\n    });\n    return result;\n  }\n  useEffect(() => {\n    if (!BMap || !map) return;\n    // 判断当前浏览器是否支持绘制海量点\n    if (!document.createElement('canvas').getContext) return;\n    const opts  = { shape, color, size };\n    if (!pointCollection) {\n      if (!opts.size) opts.size = BMAP_POINT_SIZE_SMALL;\n      if (!opts.shape) opts.shape = BMAP_POINT_SHAPE_WATERDROP;\n      if (!opts.color) opts.color = '#d340c3';\n      const pointCollection = new BMap.PointCollection(getPoints(points), opts);\n      // pointCollection.clear();\n      map.addOverlay(pointCollection);\n      setPointCollection(pointCollection);\n      EVENTS.forEach((evnetName) => {\n        if ((props as any)[evnetName]) {\n          const name = evnetName.replace(/^on/, '').toLowerCase();\n          pointCollection.addEventListener(name, (props as any)[evnetName]);\n        }\n      });\n    }\n  }, [map]);\n\n  useEffect(() => {\n    if (pointCollection && points) {\n      // pointCollection.clear();\n      pointCollection.setPoints(getPoints(points));\n    }\n  }, [points, pointCollection]);\n\n  useVisiable(pointCollection!, props);\n  useEventProperties<BMap.PointCollection, UsePointCollection>(pointCollection!, props, [\n    'onClick', 'onMouseOver', 'onMouseOut'\n  ]);\n  useProperties<BMap.PointCollection, UsePointCollection>(pointCollection!, props, ['Styles']);\n  \n  return {\n    pointCollection, setPointCollection,\n    points, setPoints,\n  };\n}","import React, { useEffect, useImperativeHandle } from 'react';\nimport usePointCollection from './usePointCollection';\nimport { OverlayProps } from '../common/map';\n\nexport interface PointCollectionProps extends OverlayProps, BMap.PointCollectionOption, BMap.PointCollectionEvents {\n  points?: [number, number][];\n}\n\nexport default React.forwardRef<PointCollectionProps & { pointCollection?: BMap.PointCollection }, PointCollectionProps>((props, ref) => {\n  const { pointCollection, setPoints } = usePointCollection(props);\n  useEffect(() => setPoints(props.points), [props.points]);\n  useImperativeHandle(ref, () => ({ ...props, pointCollection }), [pointCollection]);\n  return null;\n});\n","import { useState, useEffect, useMemo } from 'react';\nimport { useEnableProperties, useProperties, useVisiable, useEventProperties } from '../common/hooks';\nimport { CurveLineProps } from '.';\nimport { requireScript } from '../utils/requireScript';\n\nexport interface UseCurveLine extends CurveLineProps {\n}\n\nexport default (props = {} as UseCurveLine) => {\n  const { map,  strokeColor, strokeWeight, strokeOpacity, strokeStyle, enableMassClear, enableEditing = false, enableClicking, icons, } = props;\n  const [curveLine, setCurveLine] = useState<BMapLib.CurveLine>();\n  const libSDK = window.BMapLib;\n  const [bMapLib, setBMapLib] = useState<typeof BMapLib>(libSDK);\n  const [loadMapLib, setLoadBMapLib] = useState(false || !!libSDK);\n  const opts = { strokeColor, strokeWeight, strokeOpacity, strokeStyle, enableMassClear, enableEditing, enableClicking, icons, }\n  useMemo(() => {\n    // 如果第一次加载，会执行下面的\n    if (map && bMapLib && !curveLine) {\n      if(bMapLib.CurveLine) {\n        const points = (props.path || []).map((item) => new BMap.Point(item.lng, item.lat));\n        const instance = new BMapLib.CurveLine(points, opts);\n        map.addOverlay(instance);\n        setCurveLine(instance);\n      }\n    }\n\n    // 如果 bMapLib 已经加载过，会执行下面的\n    if(map && bMapLib && !bMapLib.CurveLine) {\n      requireScript('//api.map.baidu.com/library/CurveLine/1.5/src/CurveLine.min.js').then(() => {\n        if (window.BMapLib) {\n          const newMapLib = Object.assign(window.BMapLib, bMapLib)\n          setBMapLib(newMapLib)\n\n          const points = (props.path || []).map((item) => new BMap.Point(item.lng, item.lat));\n          const instance = new BMapLib.CurveLine(points, opts);\n          map.addOverlay(instance);\n          setCurveLine(instance);\n        }\n      }).catch(() => {\n\n      });\n    }\n\n    // 如果第一次加载，会执行下面的\n    if (!bMapLib && !loadMapLib) {\n      setLoadBMapLib(true);\n      requireScript('//api.map.baidu.com/library/CurveLine/1.5/src/CurveLine.min.js').then(() => {\n        if (window.BMapLib) {\n          setBMapLib(window.BMapLib);\n        }\n      }).catch(() => {\n\n      });\n    }\n  }, [map, bMapLib, curveLine, loadMapLib, props.path, opts]);\n\n  const [path, setPath] = useState(props.path || []);\n  useEffect(() => {\n    if (curveLine && props.path && path && JSON.stringify(path) !== JSON.stringify(props.path)) {\n      const points = path.map((item) => new BMap.Point(item.lng, item.lat));\n      curveLine.setPath(points);\n    }\n  }, [curveLine, path, props.path]);\n\n  useVisiable(curveLine!, props);\n  useEventProperties<BMap.Polyline, UseCurveLine>(curveLine!, props, [\n    'Click', 'DblClick',\n    'MouseDown', 'MouseUp', 'MouseOut', 'MouseOver',\n    'Remove', 'LineUpdate',\n  ]);\n  useEnableProperties<BMapLib.CurveLine, UseCurveLine>(curveLine!, props, [ 'Editing', 'MassClear']);\n  // PositionAt\n  useProperties<BMapLib.CurveLine, UseCurveLine>(curveLine!, props, [\n    'StrokeColor', 'StrokeOpacity', 'StrokeWeight', 'StrokeStyle'\n  ]);\n\n  return {\n    curveLine, setCurveLine,\n    BMapLib: bMapLib,\n    path, setPath\n  }\n}\n\n","import React, { useEffect, useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useCurveLine from './useCurveLine';\n\nexport interface CurveLineProps extends BMapLib.CurveLineOptions, BMapLib.CurveLineEvents, OverlayProps {\n  /**\n   * 设置弧线的点数组\n   */\n  path: BMap.Point[];\n}\n\nexport default React.forwardRef<CurveLineProps & { curveLine?: BMapLib.CurveLine }, CurveLineProps>((props, ref) => {\n  const { curveLine, BMapLib, setPath } = useCurveLine(props);\n  useEffect(() => setPath(props.path), [props.path]);\n  useImperativeHandle(ref, () => ({ ...props, curveLine, BMapLib }));\n  return null;\n});\n","import { useState, useMemo } from 'react'\nimport { DrawingManagerProps } from '.'\nimport { requireScript, requireCss } from '../utils/requireScript'\n\nexport interface UseDrawingManager extends DrawingManagerProps {}\n\nexport default (props = {} as UseDrawingManager) => {\n  const {\n    map,\n    isOpen,\n    drawingMode,\n    enableDrawingTool,\n    enableCalculate,\n    drawingToolOptions,\n    markerOptions,\n    circleOptions,\n    polylineOptions,\n    polygonOptions,\n    rectangleOptions\n  } = props\n\n  const [drawingManager, setDrawingManager] = useState<BMapLib.DrawingManager>()\n  const libSDK = window.BMapLib\n  const [bMapLib, setBMapLib] = useState<typeof BMapLib>(libSDK)\n  const [loadMapLib, setLoadBMapLib] = useState(false || !!libSDK)\n  const opts = {\n    isOpen,\n    drawingMode,\n    enableDrawingTool,\n    enableCalculate,\n    drawingToolOptions,\n    markerOptions,\n    circleOptions,\n    polylineOptions,\n    polygonOptions,\n    rectangleOptions\n  } as BMap.DrawingManagerOptions\n\n  useMemo(() => {\n    // 如果第一次加载，会执行下面的\n    if (map && bMapLib && !drawingManager) {\n      if (bMapLib.DrawingManager) {\n        const instance = new BMapLib.DrawingManager(map, opts)\n        setDrawingManager(instance)\n      }\n    }\n\n    // 如果 bMapLib 已经加载过，会执行下面的\n    if (map && bMapLib && !bMapLib.DrawingManager) {\n      requireCss(\n        '//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css'\n      ).then(() => {})\n\n      requireScript(\n        '//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js'\n      )\n        .then(() => {\n          if (window.BMapLib) {\n            const newMapLib = Object.assign(window.BMapLib, bMapLib)\n            setBMapLib(newMapLib)\n\n            const instance = new BMapLib.DrawingManager(map, opts)\n            setDrawingManager(instance)\n          }\n        })\n        .catch(() => {})\n    }\n\n    // 如果第一次加载，会执行下面的\n    if (!bMapLib && !loadMapLib) {\n      setLoadBMapLib(true)\n      requireCss(\n        '//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css'\n      ).then(() => {})\n      requireScript(\n        '//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js'\n      )\n        .then(() => {\n          if (window.BMapLib) {\n            setBMapLib(window.BMapLib)\n          }\n        })\n        .catch(() => {})\n    }\n  }, [map, loadMapLib, bMapLib, drawingManager])\n\n  return {\n    drawingManager,\n    setDrawingManager,\n    BMapLib: bMapLib\n  }\n}\n","import React, { useImperativeHandle } from 'react'\nimport useDrawingManager from './useDrawingManager'\nimport { MapChildProps } from '../common/map'\n\nexport interface DrawingManagerProps\n  extends BMap.DrawingManagerOptions,\n    MapChildProps {}\n\nexport default React.forwardRef<\n  DrawingManagerProps & { drawingManager?: BMapLib.DrawingManager },\n  DrawingManagerProps\n>((props, ref) => {\n  const { drawingManager } = useDrawingManager(props)\n  useImperativeHandle(ref, () => ({ ...props, drawingManager, BMapLib }))\n  return null\n})\n","import { useState, useEffect, useMemo } from 'react';\nimport { PolylineProps } from './';\nimport { useEnableProperties, useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UsePolyline extends PolylineProps {}\n\nexport default (props = {} as UsePolyline) => {\n  const { map, strokeColor, strokeWeight, strokeOpacity, strokeStyle, enableMassClear, enableEditing, enableClicking, icons, } = props;\n  const [polyline, setPolyline] = useState<BMap.Polyline>();\n  const [path, setPath] = useState(props.path || []);\n\n  const opts = { strokeColor, strokeWeight, strokeOpacity, strokeStyle, enableMassClear, enableEditing, enableClicking, icons, }\n  useMemo(() => {\n    if (map && !polyline) {\n      const points = (props.path || []).map((item) => new BMap.Point(item.lng, item.lat));\n      const instance = new BMap.Polyline(points, opts);\n      map.addOverlay(instance);\n      setPolyline(instance);\n    }\n  }, [map, polyline]);\n\n  useEffect(() => {\n    if (path && polyline) {\n      const points = path.map((item) => new BMap.Point(item.lng, item.lat));\n      polyline.setPath(points);\n    }\n  }, [polyline, path]);\n\n  useVisiable(polyline!, props);\n  useEventProperties<BMap.Polyline, UsePolyline>(polyline!, props, [\n    'Click', 'DblClick',\n    'MouseDown', 'MouseUp', 'MouseOut', 'MouseOver',\n    'Remove', 'LineUpdate',\n  ]);\n  useEnableProperties<BMap.Polyline, UsePolyline>(polyline!, props, ['Editing', 'MassClear']);\n  // PositionAt\n  useProperties<BMap.Polyline, UsePolyline>(polyline!, props, ['StrokeColor', 'StrokeOpacity', 'StrokeWeight', 'StrokeStyle']);\n\n  return {\n    polyline, setPolyline,\n    path, setPath\n  }\n}\n\n","import React, { useEffect, useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport usePolyline from './usePolyline';\n\nexport interface PolylineProps extends BMap.PolylineOptions, BMap.PolylineEvents, OverlayProps {\n  /**\n   * 设置折线的点数组\n   */\n  path: BMap.Point[];\n}\n\nexport default React.forwardRef<PolylineProps & { polygon?: BMap.Polygon }, PolylineProps>((props, ref) => {\n  const { polyline, setPath } = usePolyline(props);\n  useEffect(() => setPath(props.path), [props.path]);\n  useImperativeHandle(ref, () => ({ ...props, polyline }), [polyline]);\n  return null;\n});\n","import { useState, useEffect, useMemo } from 'react';\nimport { useEnableProperties, useProperties, useVisiable, useEventProperties } from '../common/hooks';\nimport { PolygonProps } from './';\n\nexport interface UsePolygon extends PolygonProps {}\n\nexport default (props = {} as UsePolygon) => {\n  const { map, strokeColor, fillColor, strokeWeight, strokeOpacity, fillOpacity, strokeStyle, enableMassClear, enableEditing, enableClicking } = props;\n  const [polygon, setPolygon] = useState<BMap.Polygon>();\n  const [path, setPath] = useState(props.path || []);\n\n  const opts = { strokeColor, fillColor, strokeWeight, strokeOpacity, fillOpacity, strokeStyle, enableMassClear, enableEditing, enableClicking }\n  useMemo(() => {\n    if (map && !polygon) {\n      const points = (path || []).map((item) => new BMap.Point(item.lng, item.lat));\n      const instance = new BMap.Polygon(points, opts);\n      map.addOverlay(instance);\n      setPolygon(instance);\n    }\n  }, [map, props.path, polygon]);\n\n  useEffect(() => {\n    if (path && polygon) {\n      const points = path.map((item) => new BMap.Point(item.lng, item.lat));\n      polygon.setPath(points);\n    }\n  }, [polygon, path]);\n\n  useVisiable(polygon!, props);\n  useEventProperties<BMap.Polygon, UsePolygon>(polygon!, props, [\n    'Click', 'DoubleClick',\n    'MouseDown', 'MouseUp', 'MouseOut', 'MouseOver',\n    'Remove', 'LineUpdate',\n  ]);\n  useEnableProperties<BMap.Polygon, UsePolygon>(polygon!, props, ['Editing', 'MassClear']);\n  // PositionAt\n  useProperties<BMap.Polygon, PolygonProps>(polygon!, props, ['StrokeColor', 'StrokeOpacity', 'FillColor', 'FillOpacity', 'StrokeWeight', 'StrokeStyle']);\n\n  return {\n    polygon, setPolygon,\n    path, setPath\n  }\n}\n\n","import React, { useEffect, useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport usePolygon from './usePolygon';\n\nexport interface PolygonProps extends BMap.PolygonOptions, BMap.PolygonEvents, OverlayProps {\n  /**\n   * 设置折线的点数组\n   */\n  path: BMap.Point[];\n}\n\nexport default React.forwardRef<PolygonProps & { polygon?: BMap.Polygon }, PolygonProps>((props, ref) => {\n  const { polygon, setPath } = usePolygon(props);\n  useEffect(() => setPath(props.path), [props.path]);\n  useImperativeHandle(ref, () => ({ ...props, polygon }), [polygon]);\n  return null;\n});\n","import React from 'react';\nimport Map, { MapProps } from '../Map';\n\nexport interface WithMapProps {\n  BMap?: typeof BMap;\n  container?: string | HTMLDivElement;\n  map?: BMap.Map;\n}\n\nexport default function withMap(Comp: React.ComponentClass<WithMapProps>) {\n  return React.forwardRef((props: MapProps, ref?: React.Ref<any>) => (\n    <Map {...props}>\n      {(mapProps: WithMapProps) => {\n        return <Comp ref={ref} {...props} {...mapProps} />\n      }}\n    </Map>\n  ))\n}","import { useMemo, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { usePrevious } from './hooks';\n\nexport interface UseCreatePortal {\n  /**\n   * 自定义 DOM 元素。\n   */\n  children?: React.ReactNode;\n}\n\nexport default (props = {} as UseCreatePortal) => {\n  const [div, setDiv] = useState<HTMLDivElement>(document.createElement('div'));\n  const [portal, setPortal] = useState<React.ReactPortal>();\n  const [count, setCount] = useState(0);\n  const [children, setChildren] = useState(props.children);\n  useMemo(() => {\n    if (!portal) {\n      const portalInstance = ReactDOM.createPortal(children, div);\n      setCount(count + 1);\n      setPortal(portalInstance);\n    }\n  }, [portal]);\n\n  const prevCount = usePrevious(count);\n  useMemo(() => {\n    if (div && children && count === prevCount && count > 0) {\n      const portalInstance = ReactDOM.createPortal(children, div);\n      setCount(count + 1);\n      setPortal(portalInstance);\n    }\n  }, [children, div, portal]);\n\n  return {\n    div, setDiv,\n    portal, setPortal,\n    children, setChildren,\n  };\n}","\n\nexport default function getCustomOverlay() {\n  return class extends BMap.Control {\n    public container: HTMLDivElement;\n    public map!: BMap.Map;\n    constructor(elm: HTMLDivElement, defaultAnchor?: BMap.ControlAnchor, defaultOffset?: BMap.Size) {\n      super();\n      this.container = elm;\n      this.defaultAnchor = defaultAnchor || BMAP_ANCHOR_TOP_LEFT;\n      this.defaultOffset = defaultOffset || new BMap.Size(10, 10);\n    }\n    public initialize: (map: BMap.Map) => HTMLElement = (map) => {\n      this.map = map;\n      // 添加DOM元素到地图中\n      map.getContainer().appendChild(this.container);\n      return this.container;\n    }\n    public draw = () => {}\n  }\n}","import { useMemo, useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { ControlProps } from './';\nimport { usePrevious, useProperties, useVisiable } from '../common/hooks';\nimport useCreatePortal from '../common/useCreatePortal';\nimport getControl from './getControl';\n\nexport interface UseControl extends ControlProps {}\n\nexport default (props = {} as UseControl) => {\n  const { portal, div, children, setPortal, setChildren } = useCreatePortal({\n    children: props.children\n  });\n  const [control, setControl] = useState<BMap.Control>();\n  const { map, offset, anchor } = props;\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    if (map && !control && div) {\n      const Control = getControl();\n      const instance = new Control(div, anchor, offset);\n      setCount(count + 1);\n      setControl(instance);\n      map.addOverlay(instance);\n      setChildren(props.children);\n    }\n  }, [map, control, div]);\n\n  const prevCount = usePrevious(count);\n  useMemo(() => {\n    if (map && control && div && children && count === prevCount) {\n      const portalInstance = ReactDOM.createPortal(children, div);\n      setCount(count + 1);\n      setPortal(portalInstance);\n      setChildren(props.children);\n    }\n  }, [props.children]);\n\n  useVisiable(control!, props);\n  useProperties<BMap.Control, UseControl>(control!, props, [\n    'Anchor', 'Offset',\n  ]);\n  return {\n    portal, setPortal,\n    control, setControl\n  };\n}","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useControl from './useControl';\n\n\nexport interface ControlProps extends OverlayProps {\n  /**\n   * 控件默认的停靠位置。自定义控件时需要提供此属性，作为控件的默认停靠位置\n   */\n  anchor?: BMap.ControlAnchor;\n  /**\n   * 控件默认的位置偏移值。自定义控件时需要提供此属性，作为控件的默认偏移位置\n   */\n  offset?: BMap.Size;\n  /**\n   * 自定义 DOM 元素。\n   */\n  children?: React.ReactNode;\n}\n\nexport default React.forwardRef<ControlProps & { control?: BMap.Control }, ControlProps>((props, ref) => {\n  const { control, portal } = useControl(props);\n  useImperativeHandle(ref, () => ({ ...props, control }), [control]);\n  if (portal) {\n    return portal;\n  }\n  return null;\n})","import { useMemo, useState } from 'react';\nimport { CopyrightControlProps } from './';\nimport { useProperties, useVisiable } from '../common/hooks';\nimport useCreatePortal from '../common/useCreatePortal';\n\nexport interface UseCopyrightControl extends CopyrightControlProps {}\n\nexport default function(props = {} as UseCopyrightControl) {\n  const { portal, setPortal } = useCreatePortal({ children: props.children});\n  const [copyrightControl, setCopyrightControl] = useState<BMap.CopyrightControl>();\n  const { map, anchor, offset } = props;\n  useMemo(() => {\n    if (map && !copyrightControl) {\n      const instance = new BMap.CopyrightControl({ anchor: anchor || BMAP_ANCHOR_TOP_RIGHT, offset });\n      map.addControl(instance);\n      setCopyrightControl(instance);\n    }\n  }, [map, copyrightControl]);\n\n  useVisiable(copyrightControl!, props);\n  useProperties<BMap.CopyrightControl, UseCopyrightControl>(copyrightControl!, props, [\n    'Anchor', 'Offset',\n  ]);\n\n  return {\n    portal, setPortal,\n    copyrightControl, setCopyrightControl,\n  };\n}","import React, { useImperativeHandle } from 'react';\nimport { useEffect, useState } from 'react';\nimport { usePrevious } from '../common/hooks';\nimport useCreatePortal from '../common/useCreatePortal';\n\nlet uid: number = 1\n\nexport interface Item {\n  /**\n   * 自定义 DOM 元素。\n   */\n  children?: React.ReactNode;\n  /**\n   * 该版权信息所适用的地理区域\n   */\n  bounds?: BMap.Bounds;\n  /**\n   * 表示版权控件实例，`CopyrightControl` 给子组件注入的一个版权控件实例属性。\n   */\n  control?: BMap.CopyrightControl;\n}\n\nexport default (props: Item = {}) => {\n  const { children, control, bounds } = props;\n  const { portal, div, setChildren } = useCreatePortal();\n  const [id] = useState(uid++);\n  useEffect(() => {\n    if (control) {\n      setChildren(children);\n    }\n  }, [children, control]);\n\n  const prevId = usePrevious(id);\n  useEffect(() => {\n    if (portal && control) {\n      control.addCopyright({\n        id, bounds, content: div!.innerHTML,\n      });\n    }\n    return function () {\n      if (prevId && control) {\n        control.removeCopyright(prevId);\n      }\n    };\n  }, [children, portal]);\n  return portal || null;\n}","import React, { useImperativeHandle, Fragment } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useCopyrightControl from './useCopyrightControl';\nimport Item from './Item';\n\nexport interface CopyrightControlProps extends OverlayProps, BMap.CopyrightControlOptions {\n  /**\n   * 自定义 DOM 元素。\n   */\n  children?: React.ReactNode;\n}\n\nconst CopyrightControl: any = React.forwardRef<CopyrightControlProps>((props, ref) => {\n  const { copyrightControl } = useCopyrightControl(props);\n  useImperativeHandle(ref, () => ({ ...props, copyrightControl }), [copyrightControl]);\n  return (\n    <Fragment>\n      {React.Children.toArray(props.children).map((child, index) => {\n        if (React.isValidElement(child)) {\n          return React.cloneElement(child, { control: copyrightControl, id: index + 1 });\n        }\n        return child;\n      })}\n    </Fragment>\n  );\n});\n\nCopyrightControl.Item = Item;\n\nexport default CopyrightControl;","import { useEffect, useState } from 'react';\nimport { NavigationControlProps } from './';\nimport { useProperties, useVisiable } from '../common/hooks';\n\nexport interface UseNavigationControl extends NavigationControlProps {}\n\nexport default function(props = {} as UseNavigationControl) {\n  const [navigationControl, setNavigationControl] = useState<BMap.NavigationControl>();\n  const { map, anchor, offset, type, showZoomInfo, enableGeolocation } = props;\n  useEffect(() => {\n    if (map && !navigationControl) {\n      const instance = new BMap.NavigationControl({\n        anchor: anchor || BMAP_ANCHOR_TOP_LEFT, offset, type, showZoomInfo, enableGeolocation\n      });\n      map.addControl(instance);\n      setNavigationControl(instance);\n      return () => {\n        if (map && instance) {\n          map.removeControl(instance);\n        }\n      }\n    }\n  }, [map]);\n\n  useVisiable(navigationControl!, props);\n  useProperties<BMap.NavigationControl, UseNavigationControl>(navigationControl!, props, [\n    'Anchor', 'Offset', 'Type'\n  ]);\n  return {\n    navigationControl, setNavigationControl,\n  };\n}","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useNavigationControl from './useNavigationControl';\n\nexport interface NavigationControlProps extends OverlayProps, BMap.NavigationControlOptions {}\n\nexport default React.forwardRef<NavigationControlProps, NavigationControlProps>((props, ref) => {\n  const { navigationControl } = useNavigationControl(props);\n  useImperativeHandle(ref, () => ({ ...props, navigationControl }), [navigationControl]);\n  return null;\n});\n","import { useEffect, useState } from 'react';\nimport { GeolocationControlProps } from './';\nimport { useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UseGeolocationControl extends GeolocationControlProps {}\n\nexport default function(props = {} as UseGeolocationControl) {\n  const [geolocationControl, setGeolocationControl] = useState<BMap.GeolocationControl>();\n  const { map, anchor, offset, showAddressBar, enableAutoLocation, locationIcon, onLocationSuccess } = props;\n  useEffect(() => {\n    if (map && !geolocationControl) {\n      const instance = new BMap.GeolocationControl({\n        anchor: anchor || BMAP_ANCHOR_TOP_LEFT, offset, showAddressBar, enableAutoLocation, locationIcon\n      });\n      map.addControl(instance);\n      setGeolocationControl(instance);\n      return () => {\n        if (map && instance) {\n          map.removeControl(instance);\n        }\n      }\n    }\n  }, [map]);\n\n  useVisiable(geolocationControl!, props);\n  useEventProperties<BMap.GeolocationControl, UseGeolocationControl>(geolocationControl!, props, [\n    'LocationSuccess', 'LocationError',\n  ], 'CamelCase');\n  useProperties<BMap.GeolocationControl, UseGeolocationControl>(geolocationControl!, props, [\n    'Anchor', 'Offset'\n  ]);\n  return {\n    geolocationControl, setGeolocationControl,\n  };\n}","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useGeolocationControl from './useGeolocationControl';\n\nexport interface GeolocationControlProps extends OverlayProps, BMap.GeolocationControlOptions {\n  /**\n   * 定位成功后触发此事件\n   */\n  onLocationSuccess?(result: { point: BMap.Point, addressComponent: BMap.AddressComponent }): void;\n  /**\n   * 定位失败后触发此事件\n   */\n  onLocationError?(error: { statusCode: BMap.StatusCode }): void;\n}\n\nexport default React.forwardRef<GeolocationControlProps, GeolocationControlProps>((props, ref) => {\n  const { geolocationControl } = useGeolocationControl(props);\n  useImperativeHandle(ref, () => ({ ...props, geolocationControl }), [geolocationControl]);\n  return null;\n});\n","import { useEffect, useState } from 'react';\nimport { OverviewMapControlProps } from './';\nimport { useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UseOverviewMapControl extends OverviewMapControlProps {}\n\nexport default function(props = {} as UseOverviewMapControl) {\n  const [overviewMapControl, setOverviewMapControl] = useState<BMap.OverviewMapControl>();\n  const { map, anchor, offset, size, isOpen } = props;\n  useEffect(() => {\n    if (map && !overviewMapControl) {\n      const instance = new BMap.OverviewMapControl({\n        anchor: anchor || BMAP_ANCHOR_TOP_LEFT, offset, size, isOpen\n      });\n      map.addControl(instance);\n      setOverviewMapControl(instance);\n      return () => {\n        map.removeControl(instance);\n      }\n    }\n  }, [map]);\n\n  useVisiable(overviewMapControl!, props);\n  useEventProperties<BMap.OverviewMapControl, UseOverviewMapControl>(overviewMapControl!, props, [\n    'ViewChanged', 'ViewChanging',\n  ]);\n  useProperties<BMap.OverviewMapControl, UseOverviewMapControl>(overviewMapControl!, props, [\n    'Anchor', 'Offset', 'Size'\n  ]);\n  return {\n    overviewMapControl, setOverviewMapControl,\n  };\n}","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useOverviewMapControl from './useOverviewMapControl';\n\nexport interface OverviewMapControlProps extends OverlayProps, BMap.OverviewMapControlOptions {\n  /**\n   * 缩略地图开合状态发生变化后触发此事件\n   */\n  onViewChanged?(event: { type: any, target: any, isOpen: boolean }): void;\n  /**\n   * 缩略地图开合状态发生变化过程中触发此事件\n   */\n  onViewChanging?(event: { type: any, target: any }): void;\n}\n\nexport default React.forwardRef<OverviewMapControlProps, OverviewMapControlProps>((props, ref) => {\n  const { overviewMapControl } = useOverviewMapControl(props);\n  useImperativeHandle(ref, () => ({ ...props, overviewMapControl }), [overviewMapControl]);\n  return null;\n});\n","import { useEffect, useState } from 'react';\nimport { ScaleControlProps } from './';\nimport { useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UseScaleControl extends ScaleControlProps {}\n\nexport default function(props = {} as UseScaleControl) {\n  const [scaleControl, setScaleControl] = useState<BMap.ScaleControl>();\n  const { map, anchor, offset } = props;\n  useEffect(() => {\n    if (map && !scaleControl) {\n      const instance = new BMap.ScaleControl({\n        anchor: anchor || BMAP_ANCHOR_TOP_LEFT, offset\n      });\n      map.addControl(instance);\n      setScaleControl(instance);\n      return () => {\n        map.removeControl(instance);\n      }\n    }\n  }, [map]);\n\n  useVisiable(scaleControl!, props);\n  useProperties<BMap.ScaleControl, UseScaleControl>(scaleControl!, props, [\n    'Anchor', 'Offset', 'Unit'\n  ]);\n  return {\n    scaleControl, setScaleControl,\n  };\n}","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useScaleControl from './useScaleControl';\n\nexport interface ScaleControlProps extends OverlayProps, BMap.ScaleControlOptions {}\n\nexport default React.forwardRef<ScaleControlProps, ScaleControlProps>((props, ref) => {\n  const { scaleControl } = useScaleControl(props);\n  useImperativeHandle(ref, () => ({ ...props, scaleControl }), [scaleControl]);\n  return null;\n});\n","import { useEffect, useState } from 'react';\nimport { MapTypeControlProps } from './';\nimport { useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UseMapTypeControl extends MapTypeControlProps {}\n\nexport default function(props = {} as UseMapTypeControl) {\n  const [mapTypeControl, setMapTypeControl] = useState<BMap.MapTypeControl>();\n  const { map, anchor, offset, type, mapTypes } = props;\n  useEffect(() => {\n    if (map && !mapTypeControl) {\n      const instance = new BMap.MapTypeControl({\n        anchor: anchor || BMAP_ANCHOR_TOP_LEFT, offset, type, mapTypes\n      });\n      map.addControl(instance);\n      setMapTypeControl(instance);\n      return () => {\n        map.removeControl(instance);\n      }\n    }\n  }, [map]);\n\n  useVisiable(mapTypeControl!, props);\n  useProperties<BMap.MapTypeControl, UseMapTypeControl>(mapTypeControl!, props, [\n    'Anchor', 'Offset', 'Unit'\n  ]);\n  return {\n    mapTypeControl, setMapTypeControl,\n  };\n}","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useMapTypeControl from './useMapTypeControl';\n\nexport interface MapTypeControlProps extends OverlayProps, BMap.MapTypeControlOptions {}\n\nexport default React.forwardRef<MapTypeControlProps, MapTypeControlProps>((props, ref) => {\n  const { mapTypeControl } = useMapTypeControl(props);\n  useImperativeHandle(ref, () => ({ ...props, mapTypeControl }), [mapTypeControl]);\n  return null;\n});\n","import { useEffect, useState } from 'react';\nimport { PanoramaControlProps } from './';\nimport { useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UsePanoramaControl extends PanoramaControlProps {}\n\nexport default function(props = {} as UsePanoramaControl) {\n  const [panoramaControl, setPanoramaControl] = useState<BMap.PanoramaControl>();\n  const { map } = props;\n  useEffect(() => {\n    if (map && !panoramaControl) {\n      const instance = new BMap.PanoramaControl();\n      map.addControl(instance);\n      setPanoramaControl(instance);\n      return () => {\n        map.removeControl(instance);\n      }\n    }\n  }, [map]);\n\n  useVisiable(panoramaControl!, props);\n  return {\n    panoramaControl, setPanoramaControl,\n  };\n}","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport usePanoramaControl from './usePanoramaControl';\n\nexport interface PanoramaControlProps extends OverlayProps {}\n\nexport default React.forwardRef<PanoramaControlProps, PanoramaControlProps>((props, ref) => {\n  const { panoramaControl } = usePanoramaControl(props);\n  useImperativeHandle(ref, () => ({ ...props, panoramaControl }), [panoramaControl]);\n  return null;\n});\n","import { useEffect, useState } from 'react';\nimport { GroundOverlayProps } from './';\nimport { useProperties, useVisiable, useEventProperties } from '../common/hooks';\n\nexport interface UseGroundOverlay extends GroundOverlayProps {}\n\nexport default (props = {} as UseGroundOverlay) => {\n  const [groundOverlay, setGroundOverlay] = useState<BMap.GroundOverlay>();\n  const { map, bounds, opacity, imageURL, displayOnMinLevel, displayOnMaxLevel } = props;\n  useEffect(() => {\n    if (!groundOverlay && bounds && map) {\n      const instance = new BMap.GroundOverlay(bounds, { opacity, imageURL, displayOnMinLevel, displayOnMaxLevel });\n      map.addOverlay(instance);\n      setGroundOverlay(instance);\n      return () => {\n        if (map && instance) {\n          map.removeOverlay(instance);\n        }\n      }\n    }\n  }, [map]);\n\n  useVisiable(groundOverlay!, props);\n  useEventProperties<BMap.GroundOverlay, UseGroundOverlay>(groundOverlay!, props, [\n    'Click', 'DblClick'\n  ]);\n  useProperties<BMap.GroundOverlay, UseGroundOverlay>(groundOverlay!, props, [\n    'Bounds',\n    'Opacity',\n    'ImageURL',\n    'DisplayOnMinLevel',\n    'DispalyOnMaxLevel',\n  ]);\n\n  return {\n    groundOverlay, setGroundOverlay\n  };\n}","import React, { useImperativeHandle } from 'react';\nimport { OverlayProps } from '../common/map';\nimport useGroundOverlay from './useGroundOverlay';\n\n\nexport interface GroundOverlayProps extends OverlayProps, BMap.GroundOverlayOptions, BMap.GroundOverlayEvents {\n  /**\n   * 设置矩形区域\n   */\n  bounds?: BMap.Bounds;\n}\n\nexport default React.forwardRef<GroundOverlayProps, GroundOverlayProps>((props, ref) => {\n  const { groundOverlay } = useGroundOverlay(props);\n  useImperativeHandle(ref, () => ({ ...props, groundOverlay }), [groundOverlay]);\n  return null;\n})","module.exports = __webpack_public_path__ + \"static/markers.2260d1c0.png\";"],"sourceRoot":""}